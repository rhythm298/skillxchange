import{r as l,j as e,h as x,_ as r,l as f,g as y,p as N,d as i}from"./index-83584882.js";import{H as v}from"./Header-6167e887.js";const S=()=>{const[g,o]=l.useState([]),[h,m]=l.useState([]),[p,b]=l.useState(!0),[d,c]=l.useState({title:"",content:"",type:"update"});l.useEffect(()=>{(async()=>{const a=await x(r(i,"users")),n=await x(r(i,"systemMessages"));o(a.docs.map(t=>({id:t.id,...t.data()}))),m(n.docs.map(t=>({id:t.id,...t.data()}))),b(!1)})()},[]);const u=async(s,a)=>{await f(y(i,"users",s),{banned:!a}),o(n=>n.map(t=>t.id===s?{...t,banned:!a}:t))},j=async s=>{s.preventDefault();const a={...d,timestamp:Date.now(),expiresAt:Date.now()+7*24*60*60*1e3},n=await N(r(i,"systemMessages"),a);m(t=>[...t,{id:n.id,...a}]),c({title:"",content:"",type:"update"})};return p?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(v,{}),e.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),e.jsx("div",{className:"space-y-4",children:g.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Role: ",s.role]})]}),e.jsx("button",{onClick:()=>u(s.id,s.banned||!1),className:`px-4 py-2 rounded text-white ${s.banned?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:s.banned?"Unban":"Ban"})]},s.id))})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"System Messages"}),e.jsxs("form",{onSubmit:j,className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:d.title,onChange:s=>c(a=>({...a,title:s.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message"}),e.jsx("textarea",{value:d.content,onChange:s=>c(a=>({...a,content:s.target.value})),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),e.jsxs("select",{value:d.type,onChange:s=>c(a=>({...a,type:s.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"alert",children:"Alert"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Send Message"})]}),e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:`p-4 rounded ${s.type==="alert"?"bg-red-50":s.type==="maintenance"?"bg-yellow-50":"bg-blue-50"}`,children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm mt-1",children:s.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(s.timestamp).toLocaleString()})]},s.id))})]})]})})]})};export{S as default};
