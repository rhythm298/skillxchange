import{u as j,r as a,j as e,e as N}from"./index-83584882.js";import{H as v}from"./Header-6167e887.js";import{S as h}from"./SkillChip-f28ff2e6.js";import{b as S,a as p}from"./api-0fe5b271.js";const w=({isOpen:r,onClose:l,targetUser:c,currentUserProfile:m})=>{const{user:i}=j(),[n,d]=a.useState(""),[o,x]=a.useState(""),[t,b]=a.useState(""),[u,f]=a.useState(!1);if(!r)return null;const g=async()=>{i&&(f(!0),await S({fromUserId:i.uid,toUserId:c.id,offeredSkill:n,wantedSkill:o,message:t}),f(!1),l())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Send Swap Request"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium",children:"Your Offered Skill"}),e.jsxs("select",{value:n,onChange:s=>d(s.target.value),className:"w-full px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"Select skill"}),m.skillsOffered.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium",children:"Wanted Skill"}),e.jsxs("select",{value:o,onChange:s=>x(s.target.value),className:"w-full px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"Select skill"}),c.skillsWanted.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium",children:"Message"}),e.jsx("textarea",{value:t,onChange:s=>b(s.target.value),className:"w-full px-3 py-2 border rounded",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm bg-gray-200 rounded",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:u,className:"px-4 py-2 text-sm text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50",children:u?"Sending...":"Send Request"})]})]})})},P=()=>{const{id:r}=N(),[l,c]=a.useState(null),[m,i]=a.useState(!1),{user:n}=j(),[d,o]=a.useState(null);if(a.useEffect(()=>{r&&p(r).then(c)},[r]),a.useEffect(()=>{n&&p(n.uid).then(o)},[n]),!l)return e.jsx("div",{children:"Loading..."});const x=!!n;return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(v,{}),e.jsxs("main",{className:"max-w-3xl px-4 py-6 mx-auto space-y-4 bg-white rounded shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:l.profilePhoto||"https://via.placeholder.com/80",alt:l.name,className:"w-20 h-20 rounded-full"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Rating: ",l.rating??"N/A","/5"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Skills Offered"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.skillsOffered.map(t=>e.jsx(h,{label:t},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Skills Wanted"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.skillsWanted.map(t=>e.jsx(h,{label:t},t))})]}),x&&d&&e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 text-sm text-white bg-green-600 rounded",children:"Request Swap"})]}),d&&l&&e.jsx(w,{isOpen:m,onClose:()=>i(!1),targetUser:l,currentUserProfile:d})]})};export{P as default};
